<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Entuq - Entity Tracker</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Login Modal -->
    <div id="login-modal" class="modal" style="display: block;">
        <div class="modal-content" style="max-width: 400px;">
            <h2>üè¢ Entuq Login</h2>
            <p style="color: #9ca3af; margin-bottom: 20px;">Entity Tracker by Matthew R. Ray | Version 3.0</p>
            <form onsubmit="handleLogin(event)">
                <input type="text" id="login-username" placeholder="Username *" required>
                <input type="password" id="login-password" placeholder="Password *" required>
                <button type="submit" class="btn-primary">Login</button>
            </form>
            <p style="text-align: center; margin-top: 15px; color: #9ca3af; font-size: 0.9em;">
                Don't have an account? <a href="#" onclick="showRegisterModal(); return false;" style="color: #4a9eff;">Register</a>
            </p>
            <div id="login-error" style="color: #ff6b6b; margin-top: 10px; display: none;"></div>
        </div>
    </div>

    <!-- Register Modal -->
    <div id="register-modal" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 400px;">
            <span class="close" onclick="closeRegisterModal()">&times;</span>
            <h2>üè¢ Create Account</h2>
            <p style="color: #9ca3af; margin-bottom: 20px;">Entity Tracker by Matthew R. Ray | Version 3.0</p>
            <form onsubmit="handleRegister(event)">
                <input type="text" id="register-username" placeholder="Username *" required>
                <input type="email" id="register-email" placeholder="Email *" required>
                <input type="password" id="register-password" placeholder="Password *" required>
                <button type="submit" class="btn-primary">Create Account</button>
            </form>
            <div id="register-error" style="color: #ff6b6b; margin-top: 10px; display: none;"></div>
        </div>
    </div>

    <div class="container" id="main-app" style="display: none;">
        <header>
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <div>
                    <h1>üè¢ Entuq</h1>
                    <p>Entity Tracker by Matthew R. Ray | Version 3.0</p>
                </div>
                <div style="display: flex; align-items: center; gap: 10px;">
                    <span id="user-greeting" style="color: #9ca3af;"></span>
                    <button onclick="logout()" style="padding: 8px 15px; background: linear-gradient(135deg, #9a4a4a 0%, #7a3a3a 100%); color: #ffe0e0; border: none; border-radius: 8px; cursor: pointer; box-shadow: 0 2px 5px rgba(0,0,0,0.2);">Logout</button>
                </div>
            </div>
        </header>

        <div class="main-content">
            <aside class="sidebar">
                <button class="btn-primary" onclick="showCreateEntityForm()">+ New Entity</button>
                <div id="entities-list"></div>
            </aside>

            <main class="details-view">
                <div id="welcome">
                    <h2>Welcome</h2>
                    <p>Select an entity from the left to view details, or create a new one.</p>
                </div>
                <div id="entity-details" style="display: none;"></div>
            </main>
        </div>
        
        <footer style="text-align: center; padding: 20px; margin-top: 20px; color: #9ca3af; font-size: 0.9em;">
            Copyright ¬© Matthew R. Ray - All Rights Reserved
        </footer>
    </div>

    <!-- Create/Edit Entity Modal -->
    <div id="create-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2 id="entity-modal-title">Create Entity</h2>
            <form onsubmit="handleEntitySubmit(event)">
                <input type="text" id="entity-name" placeholder="Entity Name *" required>
                <textarea id="entity-description" placeholder="Description"></textarea>
                <input type="text" id="entity-ein" placeholder="EIN (Employer Identification Number)">
                <input type="text" id="entity-state" placeholder="State of Incorporation">
                <input type="date" id="entity-date" placeholder="Date of Incorporation">
                <input type="text" id="entity-address" placeholder="Registered Address">
                <input type="tel" id="entity-phone" placeholder="Registered Phone Number">
                <select id="entity-status">
                    <option value="active">Active</option>
                    <option value="inactive">Inactive</option>
                    <option value="dissolved">Dissolved</option>
                </select>
                <button type="submit" id="entity-submit-btn" class="btn-primary">Create</button>
            </form>
        </div>
    </div>

    <!-- Upload Document Modal -->
    <div id="upload-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeUploadModal()">&times;</span>
            <h2>Upload Document</h2>
            <form onsubmit="uploadDocument(event)">
                <input type="text" id="document-title" placeholder="Document Title">
                <input type="text" id="document-type" placeholder="Document Type (optional)">
                <input type="file" id="document-file" accept=".pdf,.doc,.docx,.txt,.xls,.xlsx,.png,.jpg,.jpeg,.gif" required>
                <small style="color: #666;">Allowed: PDF, DOC, DOCX, TXT, XLS, XLSX, PNG, JPG, JPEG, GIF (max 16MB)</small>
                <button type="submit" class="btn-primary">Upload</button>
            </form>
        </div>
    </div>

    <!-- Document Viewer Modal -->
    <div id="viewer-modal" class="modal">
        <div class="modal-content" style="max-width: 90vw; height: 90vh; margin: 5vh auto;">
            <span class="close" onclick="closeViewerModal()">&times;</span>
            <h2 id="viewer-title">Document Viewer</h2>
            <iframe id="document-viewer" style="width: 100%; height: calc(100% - 100px); border: none; border-radius: 8px;"></iframe>
        </div>
    </div>

    <!-- Add Account Modal -->
    <div id="account-modal" class="modal">
        <div class="modal-content" style="max-width: 600px;">
            <span class="close" onclick="closeAccountModal()">&times;</span>
            <h2 id="account-modal-title">Add Account</h2>
            <form onsubmit="handleAccountSubmit(event)">
                <input type="text" id="account-name" placeholder="Account Name *" required>
                <input type="text" id="account-number" placeholder="Account Number">
                <input type="number" id="account-balance" placeholder="Balance" step="0.01">
                <input type="text" id="account-type" placeholder="Account Type">
                <input type="text" id="account-username" placeholder="Username/Login">
                <div style="position: relative;">
                    <input type="password" id="account-password" placeholder="Password">
                    <span onclick="toggleAccountPassword()" style="position: absolute; right: 10px; top: 12px; cursor: pointer; user-select: none;">üëÅÔ∏è</span>
                </div>
                <input type="url" id="account-url" placeholder="Account URL">
                <textarea id="account-notes" placeholder="Notes"></textarea>
                <button type="submit" class="btn-primary">Save</button>
            </form>
        </div>
    </div>

    <!-- Add Task Modal -->
    <div id="task-modal" class="modal">
        <div class="modal-content" style="max-width: 700px; max-height: 90vh; overflow-y: auto;">
            <span class="close" onclick="closeTaskModal()">&times;</span>
            <h2 id="task-modal-title">Add Task</h2>
            <form onsubmit="handleTaskSubmit(event)">
                <input type="text" id="task-title" placeholder="Title *" required>
                <textarea id="task-description" placeholder="Description"></textarea>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                    <select id="task-status">
                        <option value="pending">Pending</option>
                        <option value="in-progress">In Progress</option>
                        <option value="completed">Completed</option>
                        <option value="blocked">Blocked</option>
                    </select>
                    <select id="task-priority">
                        <option value="">Priority</option>
                        <option value="low">Low</option>
                        <option value="medium">Medium</option>
                        <option value="high">High</option>
                        <option value="urgent">Urgent</option>
                    </select>
                </div>
                <input type="text" id="task-category" placeholder="Category">
                <input type="text" id="task-assigned" placeholder="Assigned To">
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                    <input type="date" id="task-start-date" placeholder="Start Date">
                    <input type="date" id="task-due-date" placeholder="Due Date">
                </div>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                    <input type="number" id="task-estimated-hours" placeholder="Estimated Hours" step="0.1">
                    <input type="number" id="task-actual-hours" placeholder="Actual Hours" step="0.1">
                </div>
                <input type="date" id="task-completion-date" placeholder="Completion Date">
                <input type="text" id="task-dependencies" placeholder="Dependencies (comma separated)">
                <button type="submit" class="btn-primary">Save</button>
            </form>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>

